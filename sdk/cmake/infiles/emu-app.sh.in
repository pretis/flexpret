#!/bin/bash
#
# This file is auto generated by CMake and should not be modified. 
#
# This script will attempt to run your compiled software on the FlexPRET
# emulator.
#
# You got this script because the CMake variable `TARGET` was set to
# `emulator` or not set at all. To get a script that attempts to uploade
# your program to an FPGA with a bootloader instead, set the `TARGET`
# variable to `fpga` in your application's `CMakeLists.txt`.

set -e

if [[ -z "${FP_PATH}" ]]; then
    echo "Environment variable FP_PATH not set!"
    exit 1
fi

if [[ -z "${FP_SDK_PATH}" ]]; then
    echo "Environment variable FP_SDK_PATH not set!"
    exit 1
fi

# Launch installed FlexPRET emulator with instruction memory file
# @$ adds additional aguments from command line, .e.g, --trace
${FP_SDK_PATH}/flexpret/fp-emu +ispm=@IMEM_LOCATION@/@IMEM_NAME@ $@
